<div class="container">
  <ng-container *ngIf="showForm && !show2FA">
    <app-login
      [showForm]="showForm"
      (hideForm)="hideLoginForm()"
      (loginData)="onLoginData($event)"
      (allow2FA)="allow2FA()"
    ></app-login>
  </ng-container>

  <ng-container *ngIf="show2FA && !showForm">
    <app-two-fa
      (hide2FA)="hide2FA()"
      (loginData)="onLoginData($event)"
    ></app-two-fa>
  </ng-container>

  <ng-container *ngIf="!show2FA && !showForm">
    <header>
      <a routerLink="/account">
        <picture>
          <img src="../assets/logo.png" class="logo" alt="Logo DAT UpClear" />
        </picture>
      </a>
      <nav class="main-nav">
        <ul class="main-nav-list">
          <li class="list">
            <div ngbDropdown class="d-inline-block dropdown">
              <a
                class="btn--1 btn--in-progress"
                id="dropdownBasic1"
                ngbDropdownToggle
              >
                Domain
              </a>
              <div
                ngbDropdownMenu
                aria-labelledby="dropdownBasic1"
                class="dropdown-menu"
              >
                <a
                  ngbDropdownItem
                  [routerLink]="active_page"
                  class="btn--2 btn--margin-right btn--in-progress"
                  (click)="active_page = checkActivity('domain-administration')"
                  >Domain Administration</a
                >
                <a
                  ngbDropdownItem
                  [routerLink]="active_page"
                  class="btn--2 btn--margin-right btn--completed"
                  (click)="active_page = checkActivity('sys-admin-by-domain')"
                  >SysAdmin by Domain</a
                >
                <a
                  ngbDropdownItem
                  [routerLink]="active_page"
                  class="btn--2 btn--margin-right btn--completed"
                  (click)="active_page = checkActivity('domain-by-sys-admin')"
                  >Domain by SysAdmin</a
                >
              </div>
            </div>
          </li>
          <li>
            <div ngbDropdown class="d-inline-block dropdown">
              <a
                class="btn--1 btn--in-progress"
                id="dropdownBasic1"
                ngbDropdownToggle
              >
                Infrastructure
              </a>
              <div
                ngbDropdownMenu
                aria-labelledby="dropdownBasic1"
                class="dropdown-menu"
              >
                <a
                  ngbDropdownItem
                  [routerLink]="active_page"
                  class="btn--2 btn--margin-right btn--completed"
                  (click)="active_page = checkActivity('database')"
                  >Database</a
                >
                <a
                  ngbDropdownItem
                  [routerLink]="active_page"
                  class="btn--2 btn--margin-right btn--completed"
                  (click)="active_page = checkActivity('server')"
                  >Server</a
                >
                <a
                  ngbDropdownItem
                  [routerLink]="active_page"
                  class="btn--2 btn--margin-right btn--completed"
                  (click)="active_page = checkActivity('server-parameter')"
                  >Server Parameter</a
                >
              </div>
            </div>
          </li>
          <li>
            <a
              [routerLink]="active_page"
              class="btn--1 btn--completed"
              (click)="active_page = checkActivity('/users')"
              >Users
            </a>
          </li>
          <li>
            <a
              class="btn--1 btn--completed"
              (click)="active_page = checkActivity('/reports')"
              [routerLink]="active_page"
              >Reports
            </a>
          </li>

          <li>
            <p class="text nav-end">
              Hello <strong>{{ email }}</strong
              >!
            </p>
          </li>
          <li>
            <a href="#" class="btn--log-off nav-end--2" (click)="deconnexion()"
              >Log off</a
            >
          </li>
        </ul>
      </nav>
    </header>
    <router-outlet></router-outlet>
  </ng-container>
</div>

<!-- Error pop-up -->
<div>
  <app-error-popup
    *ngIf="show_error_popup"
    [errorMessage]="error_message"
    (close)="closeErrorPopup()"
  ></app-error-popup>
</div>
